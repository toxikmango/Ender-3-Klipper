=============== Log rollover at Wed Oct 18 07:59:40 2023 ===============
Starting Klippy...
Args: ['/home/pi/klipper/klippy/klippy.py', '/home/pi/printer_data/config/printer.cfg', '-I', '/home/pi/printer_data/comms/klippy.serial', '-l', '/home/pi/printer_data/logs/klippy.log', '-a', '/home/pi/printer_data/comms/klippy.sock']
Git version: 'v0.11.0-240-g6d48adf9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper.git
CPU: 4 core ?
Python: '2.7.18 (default, Jul 14 2021, 08:11:37) \n[GCC 10.2.1 20210110]'
Start printer at Wed Oct 18 07:59:41 2023 (1697612382.0 13.1)
===== Config file =====
[virtual_sdcard]
path = /home/pi/printer_data/gcodes

[pause_resume]

[display_status]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	TURN_OFF_HEATERS
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
variable_extrude = 1.0
gcode = 
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	{% set x_park = printer.toolhead.axis_maximum.x|float - 5.0 %}
	{% set y_park = printer.toolhead.axis_maximum.y|float - 5.0 %}
	{% set max_z = printer.toolhead.axis_maximum.z|float %}
	{% set act_z = printer.toolhead.position.z|float %}
	{% if act_z < (max_z - 2.0) %}
	{% set z_safe = 2.0 %}
	{% else %}
	{% set z_safe = max_z - act_z %}
	{% endif %}
	PAUSE_BASE
	G91
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G1 E-{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	{% if "xyz" in printer.toolhead.homed_axes %}
	G1 Z{z_safe} F900
	G90
	G1 X{x_park} Y{y_park} F6000
	{% else %}
	{action_respond_info("Printer not homed")}
	{% endif %}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
gcode = 
	{% set E = printer["gcode_macro PAUSE"].extrude|float %}
	{% if 'VELOCITY' in params|upper %}
	{% set get_params = ('VELOCITY=' + params.VELOCITY)  %}
	{%else %}
	{% set get_params = "" %}
	{% endif %}
	{% if printer.extruder.can_extrude|lower == 'true' %}
	G91
	G1 E{E} F2100
	{% else %}
	{action_respond_info("Extruder not hot enough")}
	{% endif %}
	RESUME_BASE {get_params}

[gcode_macro START_PRINT]
gcode = 
	{% set BED_TEMP = params.BED_TEMP|default(60)|float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(190)|float %}
	G90
	G28
	M104 S160
	M140 S{BED_TEMP}
	G92 E0
	BED_MESH_PROFILE LOAD="default"
	G1 Z2.0 F3000
	G1 X0.1 Y20 Z0.3 F5000.0
	M109 S{EXTRUDER_TEMP}
	G1 X0.1 Y200.0 Z0.3 F1500.0 E15
	G1 X0.4 Y200.0 Z0.3 F5000.0
	G1 X0.4 Y20 Z0.3 F1500.0 E30
	G92 E0
	G1 Z2.0 F3000
	G1 X5 Y20 Z0.3 F5000.0

[gcode_macro UNLOAD_FILAMENT]
gcode = 
	{% set X = params.X|default(50)|float %}
	{% set Y = params.Y|default(0)|float %}
	{% set Z = params.Z|default(10)|float %}
	SAVE_GCODE_STATE NAME=M600_state
	PAUSE
	G91
	G1 E-.8 F2700
	G1 Z{Z}
	G90
	G1 X{X} Y{Y} F3000
	G91
	G1 E-200 F1000
	RESTORE_GCODE_STATE NAME=M600_state

[gcode_macro LOAD_FILAMENT]
gcode = 
	{% set X = params.X|default(50)|float %}
	{% set Y = params.Y|default(0)|float %}
	{% set Z = params.Z|default(10)|float %}
	SAVE_GCODE_STATE NAME=M600_state
	PAUSE
	G91
	G1 E-.8 F2700
	G1 Z{Z}
	G90
	G1 X{X} Y{Y} F3000
	G91
	G1 E200 F1000
	RESTORE_GCODE_STATE NAME=M600_state

[gcode_macro END_PRINT]
gcode = 
	{% set Y_MAX = printer.toolhead.axis_maximum.y %}
	{% set X_MIN = printer.toolhead.axis_minimum.x %}
	G91
	G1 E-2 F2700
	G1 E-2 Z0.2 F2400
	G1 X5 Y5 F3000
	G1 Z10
	G90
	G1 Y {Y_MAX -10} X {X_MIN +2} F3000
	M106 S0
	M104 S0
	M140 S0
	G92 E0
	M84 X Y E

[respond]
default_type = command

[stepper_x]
step_pin = PC2
dir_pin = PB9
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = ^PA5
position_endstop = 0
position_max = 248
homing_speed = 50

[stepper_y]
step_pin = PB8
dir_pin = PB7
enable_pin = !PC3
microsteps = 16
rotation_distance = 40
endstop_pin = ^PA6
position_endstop = 0
position_max = 235
homing_speed = 50

[stepper_z]
step_pin = PB6
dir_pin = !PB5
enable_pin = !PC3
microsteps = 16
rotation_distance = 8
endstop_pin = probe:z_virtual_endstop
position_max = 250
position_min = -5

[extruder]
max_extrude_only_distance = 400.0
step_pin = PB4
dir_pin = PB3
enable_pin = !PC3
microsteps = 16
rotation_distance = 31.723
nozzle_diameter = 0.394
filament_diameter = 1.750
heater_pin = PA1
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC5
min_temp = 0
max_temp = 300
pressure_advance = 0.424
pressure_advance_smooth_time = 0.040
control = pid
pid_kp = 29.124
pid_ki = 1.517
pid_kd = 139.797

[heater_bed]
heater_pin = PA2
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PC4
min_temp = 0
max_temp = 130
control = pid
pid_kp = 72.147
pid_ki = 1.755
pid_kd = 741.309

[fan]
pin = PA0

[mcu]
serial = /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.2:1.0-port0
restart_method = command

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 4000
max_accel_to_decel = 4000
max_z_velocity = 5
max_z_accel = 100

[mcu rpi]
serial = /tmp/klipper_host_mcu

[adxl345]
cs_pin = rpi:None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	118, 118, 60

[input_shaper]
shaper_freq_x = 52.4
shaper_type_x = ei
shaper_freq_y = 59.4
shaper_type_y = 2hump_ei

[bltouch]
sensor_pin = ^PB1
control_pin = PB0
x_offset = -46.5
y_offset = -3.5
z_offset = 1.270

[safe_z_home]
home_xy_position = 116.5,116.5
speed = 120
z_hop = 10
z_hop_speed = 5

[bed_mesh]
speed = 120
horizontal_move_z = 5
mesh_min = 15, 15
mesh_max = 200, 205
probe_count = 10,10
algorithm = bicubic
fade_start = 1
fade_end = 10
fade_target = 0

[screws_tilt_adjust]
screw1 = 70.5,37.5
screw1_name = front left screw
screw2 = 240,37.5
screw2_name = front right screw
screw3 = 240,207.5
screw3_name = rear right screw
screw4 = 70.5,207.5
screw4_name = rear left screw
horizontal_move_z = 10
speed = 50
screw_thread = CW-M4

[bed_mesh default]
version = 1
points = 
	0.077500, 0.045000, -0.015000, 0.010000, -0.047500, -0.080000, -0.075000, -0.090000, -0.160000, -0.122500
	0.107500, 0.050000, 0.010000, 0.017500, -0.042500, -0.072500, -0.067500, -0.100000, -0.150000, -0.122500
	0.080000, 0.020000, -0.015000, -0.020000, -0.020000, -0.032500, -0.080000, -0.105000, -0.170000, -0.120000
	0.012500, -0.020000, -0.002500, -0.027500, -0.027500, -0.045000, -0.095000, -0.100000, -0.185000, -0.145000
	0.042500, 0.015000, 0.030000, -0.007500, -0.057500, -0.067500, -0.092500, -0.092500, -0.157500, -0.142500
	0.055000, 0.037500, -0.002500, -0.007500, -0.052500, -0.075000, -0.075000, -0.092500, -0.165000, -0.150000
	0.027500, 0.010000, -0.007500, -0.015000, -0.050000, -0.067500, -0.057500, -0.067500, -0.122500, -0.085000
	0.085000, 0.055000, 0.037500, 0.012500, -0.027500, -0.067500, -0.047500, -0.087500, -0.152500, -0.140000
	0.082500, 0.042500, 0.002500, 0.020000, -0.010000, -0.027500, -0.025000, -0.065000, -0.115000, -0.075000
	0.070000, 0.040000, 0.027500, 0.020000, -0.025000, -0.040000, -0.042500, -0.055000, -0.100000, -0.042500
tension = 0.2
min_x = 15.0
algo = bicubic
y_count = 10
mesh_y_pps = 2
min_y = 15.0
x_count = 10
max_y = 204.99
mesh_x_pps = 2
max_x = 199.95
=======================
Extruder max_extrude_ratio=0.258159
mcu 'mcu': Starting serial connect
mcu 'mcu': got {'#receive_time': 14.528789102, u'next_clock': 412266240, u'oid': 10, u'value': 31404, '#name': u'analog_in_state', '#sent_time': 14.495060695}
mcu 'mcu': got {'#receive_time': 14.578809306, u'next_clock': 415866240, u'oid': 15, u'value': 31385, '#name': u'analog_in_state', '#sent_time': 14.54904175}
mcu 'mcu': got {'#receive_time': 14.828873324, u'next_clock': 433866240, u'oid': 10, u'value': 31405, '#name': u'analog_in_state', '#sent_time': 14.81968775}
mcu 'mcu': got {'#receive_time': 14.881397324, u'next_clock': 437466240, u'oid': 15, u'value': 31388, '#name': u'analog_in_state', '#sent_time': 14.874084843}
Loaded MCU 'mcu' 105 commands (v0.10.0-626-g5e34b450 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.34-4+rpi1+14) 2.34)
MCU 'mcu' config: BUS_PINS_i2c1=PB6,PB7 BUS_PINS_i2c2=PB10,PB11 BUS_PINS_i2c1a=PB8,PB9 RESERVE_PINS_serial=PA10,PA9 BUS_PINS_spi1a=PB4,PB5,PB3 STATS_SUMSQ_BASE=256 RECEIVE_WINDOW=192 STEPPER_BOTH_EDGE=1 SERIAL_BAUD=250000 ADC_MAX=4095 BUS_PINS_spi3=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi1=PA6,PA7,PA5 PWM_MAX=255 MCU=stm32f103xe CLOCK_FREQ=72000000
mcu 'rpi': Starting connect
mcu 'mcu': got {'#receive_time': 15.128851046, u'next_clock': 455466240, u'oid': 10, u'value': 31401, '#name': u'analog_in_state', '#sent_time': 14.934290361}
mcu 'mcu': got {'#receive_time': 15.178849565, u'next_clock': 459066240, u'oid': 15, u'value': 31389, '#name': u'analog_in_state', '#sent_time': 14.934290361}
mcu 'mcu': got {'#receive_time': 15.428919768, u'next_clock': 477066240, u'oid': 10, u'value': 31403, '#name': u'analog_in_state', '#sent_time': 14.934290361}
Loaded MCU 'rpi' 111 commands (v0.11.0-22-gfe0fc296 / gcc: (Raspbian 10.2.1-6+rpi1) 10.2.1 20210110 binutils: (GNU Binutils for Raspbian) 2.35.2)
MCU 'rpi' config: PCA9685_MAX=4096 ADC_MAX=4095 PWM_MAX=32768 CLOCK_FREQ=50000000 MCU=linux STATS_SUMSQ_BASE=256
Configured MCU 'mcu' (1024 moves)
Sending MCU 'rpi' printer configuration...
Configured MCU 'rpi' (1024 moves)
Starting heater checks for heater_bed
webhooks client 4129903200: New connection
webhooks client 4129903200: Client info {'program': 'Moonraker', 'version': 'v0.8.0-87-g8eddec8'}
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (61.5, 18.5)    | (15.0, 15.0)
  1   | (82.0, 18.5)    | (35.5, 15.0)
  2   | (102.6, 18.5)   | (56.1, 15.0)
  3   | (123.2, 18.5)   | (76.7, 15.0)
  4   | (143.7, 18.5)   | (97.2, 15.0)
  5   | (164.2, 18.5)   | (117.8, 15.0)
  6   | (184.8, 18.5)   | (138.3, 15.0)
  7   | (205.3, 18.5)   | (158.8, 15.0)
  8   | (225.9, 18.5)   | (179.4, 15.0)
  9   | (246.5, 18.5)   | (200.0, 15.0)
  10  | (246.5, 39.6)   | (200.0, 36.1)
  11  | (225.9, 39.6)   | (179.4, 36.1)
  12  | (205.4, 39.6)   | (158.9, 36.1)
  13  | (184.8, 39.6)   | (138.3, 36.1)
  14  | (164.2, 39.6)   | (117.8, 36.1)
  15  | (143.7, 39.6)   | (97.2, 36.1)
  16  | (123.2, 39.6)   | (76.7, 36.1)
  17  | (102.6, 39.6)   | (56.1, 36.1)
  18  | (82.1, 39.6)    | (35.6, 36.1)
  19  | (61.5, 39.6)    | (15.0, 36.1)
  20  | (61.5, 60.7)    | (15.0, 57.2)
  21  | (82.0, 60.7)    | (35.5, 57.2)
  22  | (102.6, 60.7)   | (56.1, 57.2)
  23  | (123.2, 60.7)   | (76.7, 57.2)
  24  | (143.7, 60.7)   | (97.2, 57.2)
  25  | (164.2, 60.7)   | (117.8, 57.2)
  26  | (184.8, 60.7)   | (138.3, 57.2)
  27  | (205.3, 60.7)   | (158.8, 57.2)
  28  | (225.9, 60.7)   | (179.4, 57.2)
  29  | (246.5, 60.7)   | (200.0, 57.2)
  30  | (246.5, 81.8)   | (200.0, 78.3)
  31  | (225.9, 81.8)   | (179.4, 78.3)
  32  | (205.4, 81.8)   | (158.9, 78.3)
  33  | (184.8, 81.8)   | (138.3, 78.3)
  34  | (164.2, 81.8)   | (117.8, 78.3)
  35  | (143.7, 81.8)   | (97.2, 78.3)
  36  | (123.2, 81.8)   | (76.7, 78.3)
  37  | (102.6, 81.8)   | (56.1, 78.3)
  38  | (82.1, 81.8)    | (35.6, 78.3)
  39  | (61.5, 81.8)    | (15.0, 78.3)
  40  | (61.5, 102.9)   | (15.0, 99.4)
  41  | (82.0, 102.9)   | (35.5, 99.4)
  42  | (102.6, 102.9)  | (56.1, 99.4)
  43  | (123.2, 102.9)  | (76.7, 99.4)
  44  | (143.7, 102.9)  | (97.2, 99.4)
  45  | (164.2, 102.9)  | (117.8, 99.4)
  46  | (184.8, 102.9)  | (138.3, 99.4)
  47  | (205.3, 102.9)  | (158.8, 99.4)
  48  | (225.9, 102.9)  | (179.4, 99.4)
  49  | (246.5, 102.9)  | (200.0, 99.4)
  50  | (246.5, 124.0)  | (200.0, 120.5)
  51  | (225.9, 124.0)  | (179.4, 120.5)
  52  | (205.4, 124.0)  | (158.9, 120.5)
  53  | (184.8, 124.0)  | (138.3, 120.5)
  54  | (164.2, 124.0)  | (117.8, 120.5)
  55  | (143.7, 124.0)  | (97.2, 120.5)
  56  | (123.2, 124.0)  | (76.7, 120.5)
  57  | (102.6, 124.0)  | (56.1, 120.5)
  58  | (82.1, 124.0)   | (35.6, 120.5)
  59  | (61.5, 124.0)   | (15.0, 120.5)
  60  | (61.5, 145.2)   | (15.0, 141.7)
  61  | (82.0, 145.2)   | (35.5, 141.7)
  62  | (102.6, 145.2)  | (56.1, 141.7)
  63  | (123.2, 145.2)  | (76.7, 141.7)
  64  | (143.7, 145.2)  | (97.2, 141.7)
  65  | (164.2, 145.2)  | (117.8, 141.7)
  66  | (184.8, 145.2)  | (138.3, 141.7)
  67  | (205.3, 145.2)  | (158.8, 141.7)
  68  | (225.9, 145.2)  | (179.4, 141.7)
  69  | (246.5, 145.2)  | (200.0, 141.7)
  70  | (246.5, 166.3)  | (200.0, 162.8)
  71  | (225.9, 166.3)  | (179.4, 162.8)
  72  | (205.4, 166.3)  | (158.9, 162.8)
  73  | (184.8, 166.3)  | (138.3, 162.8)
  74  | (164.2, 166.3)  | (117.8, 162.8)
  75  | (143.7, 166.3)  | (97.2, 162.8)
  76  | (123.2, 166.3)  | (76.7, 162.8)
  77  | (102.6, 166.3)  | (56.1, 162.8)
  78  | (82.1, 166.3)   | (35.6, 162.8)
  79  | (61.5, 166.3)   | (15.0, 162.8)
  80  | (61.5, 187.4)   | (15.0, 183.9)
  81  | (82.0, 187.4)   | (35.5, 183.9)
  82  | (102.6, 187.4)  | (56.1, 183.9)
  83  | (123.2, 187.4)  | (76.7, 183.9)
  84  | (143.7, 187.4)  | (97.2, 183.9)
  85  | (164.2, 187.4)  | (117.8, 183.9)
  86  | (184.8, 187.4)  | (138.3, 183.9)
  87  | (205.3, 187.4)  | (158.8, 183.9)
  88  | (225.9, 187.4)  | (179.4, 183.9)
  89  | (246.5, 187.4)  | (200.0, 183.9)
  90  | (246.5, 208.5)  | (200.0, 205.0)
  91  | (225.9, 208.5)  | (179.4, 205.0)
  92  | (205.4, 208.5)  | (158.9, 205.0)
  93  | (184.8, 208.5)  | (138.3, 205.0)
  94  | (164.2, 208.5)  | (117.8, 205.0)
  95  | (143.7, 208.5)  | (97.2, 205.0)
  96  | (123.2, 208.5)  | (76.7, 205.0)
  97  | (102.6, 208.5)  | (56.1, 205.0)
  98  | (82.1, 208.5)   | (35.6, 205.0)
  99  | (61.5, 208.5)   | (15.0, 205.0)
Starting heater checks for extruder
webhooks: registering remote method 'shutdown_machine' for connection id: 4129903200
webhooks: registering remote method 'reboot_machine' for connection id: 4129903200
webhooks: registering remote method 'pause_job_queue' for connection id: 4129903200
webhooks: registering remote method 'start_job_queue' for connection id: 4129903200
